<!DOCTYPE html>
<html lang="en-us">
   <head>
      <meta charset="UTF-8">
      <title>XMLHTTPRequest</title>
      <meta name="description" content="contents of page">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="stylesheet" type="text/css" href="style.css">
   </head>
   <body>
      <h1>XMLHTTPRequest</h1>
	       <nav><a href= "index.html">Home</a></nav>
	  <script>
function loadJson() {
  var xhttp = new XMLHttpRequest();
  var file = "json.txt";
  
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
		var output = JSON.parse(this.responseText);
		printOut(output);
    }
  };
  xhttp.open("GET", file, true);
  xhttp.send();
  
  function printOut(op){
   var text = " ";
         for (var i = 0; i < op.students.length; i++){
         	text += "<li>" + "<strong>"+op.students[i].first + "</strong>" + " " + "<strong>"+ op.students[i].last +"</strong>" +"</li>" +
         	"<li>" + op.students[i].address.city  + " " + op.students[i].address.state  + ", " + op.students[i].address.zip + "</li>" +
         	"<li>" + op.students[i].major + "</li>" +
         	"<li>" + op.students[i].gpa + "</li>";
         }
         document.getElementById("firstPlace").innerHTML = text;
  }
}
</script>
	<p>This will load a Json file that I have put on the server similar to the JsonParse</p>
	<button type="button" onclick="loadJson()">Json File</button>
	<ul id="firstPlace"></ul>
	
	
	<script>
	function loadAPI(t) {
  var x2http = new XMLHttpRequest();
  var url = "http://www.omdbapi.com/?t=" + t + "&apikey=cd336b3";
  
  x2http.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
		var out = JSON.parse(this.responseText);
		printPoster(out);
    }
  };
  x2http.open("GET", url, true);
  x2http.send();
  
  function printPoster(p){
	var image = p.Poster;
      var place = document.getElementById('sign');
      place.src = image;

         }
		 document.getElementById("title").value = " ";
         document.getElementById("firstPlace").innerHTML = image;
		 
}
	</script>
		<p>This will load a Json file from an API and display the movie poster of you choice</p>
		 <label>Put your movie here</label>
         <input id="title" type="text" value="big trouble in little china"><br>
		<button type="button" onclick=loadAPI(document.getElementById("title").value)>API File</button> <br>
		<img src="https://openclipart.org/image/800px/svg_to_png/194077/Placeholder.png" alt="Sign" id="sign" width= "240" hight="600" ><br><br>
         <footer>
            <p>created by Skyler Hildreth</p>
         </footer>

   </body>
</html>